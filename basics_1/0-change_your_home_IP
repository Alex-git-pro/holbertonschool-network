#!/bin/bash
# Script to change localhost IP and override facebook.com resolution

HOSTS_FILE="/etc/hosts"

# Check if the script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root (sudo ./0-change_your_home_IP)"
  exit 1
fi

# Backup the original /etc/hosts file if not already backed up
if [ ! -f "${HOSTS_FILE}.bak" ]; then
  cp $HOSTS_FILE ${HOSTS_FILE}.bak
fi

# Replace localhost line with new IP
sed -i '/127.0.0.1\s\+localhost/d' $HOSTS_FILE
echo "127.0.0.2 localhost" >> $HOSTS_FILE

# Remove any existing facebook.com lines
sed -i '/facebook\.com/d' $HOSTS_FILE
# Add new facebook.com resolution
echo "8.8.8.8 facebook.com" >> $HOSTS_FILE

echo "âœ… Changes applied. localhost -> 127.0.0.2, facebook.com -> 8.8.8.8"
